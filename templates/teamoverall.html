{% extends 'base.html'  %}

{% block content  %}
{% load static  %}
{% csrf_token  %}

<main class="main-reminder main-ots">
  <div class="sicdiv">
    <input type="text" class="osd" placeholder="Search">
    <img  src="{% static 'Images/Vector.png'%}" class="searchicon" alt="" >
</div>
<div class="overcarddiv">
  <a class="overcard" href="/ptp  ">
    <img  src="{% static 'Images/nfolder.svg'%}" class="cimg" alt="" >
     <span class="crdhead">Lead PTP Behaviour</span>
  </a>
<a href="/ptpcount" class="linkme">
<div class="overcard">
    <img  src="{% static 'Images/npaid.svg'%}" class="cimg" alt="" >
    <span class="crdhead">PTP Status</span>
</div>
</a>
<a href="/paidcount" class="linkme">
<div class="overcard">
    <img  src="{% static 'Images/nptp.svg'%}" class="cimg" alt="" >
    <span class="crdhead">Paid Status</span>
</div>
</a>
<a href="/teamoverall" class="linkme">
<div class="overcard clicked">
    <img  src="{% static 'Images/ngrp.svg'%}" class="cimg" alt=""  style="filter:brightness(100)" >
    <span class="crdhead"  style="color: #FFFFFF;">Disposition Status</span>
</div>
</a>
<div class="overcard">
    <img  src="{% static 'Images/nnc.svg'%}" class="cimg" alt="" >
    <spa class="crdhead">Non Attempted</span>
</div>
</div>

<div class="table-wrapper table-responsive" style="margin: auto;margin-top: 12px;">
    <table class="table table-borderless  rounded">
      <thead class="sticky-top">
        <tr>
          <th  scope="col" style="width: 17%;">Sub Disposition</th>
          <th  scope="col">1</th>
          <th  scope="col">2</th>
          <th  scope="col">3</th>
          <th  scope="col">4</th>
          <th  scope="col">5</th>
          <th  scope="col">6</th>
          <th  scope="col">7</th>
          <th  scope="col">8</th>
          <th  scope="col">9</th>
          <th  scope="col">10</th>
        </tr>
      </thead>
      <tbody class="tablebody">
        {% for i in con %}
        <tr>
         <td class="{{i.1}}">{{i.0}}</td>
         <td class="atm1"></td>
         <td class="atm2"></td>
         <td class="atm3"></td>
         <td class="atm4"></td>
         <td class="atm5"></td>
         <td class="atm6"></td>
         <td class="atm7"></td>
         <td class="atm8"></td>
         <td class="atm9"></td>
         <td class="atm10"></td>
        </tr>
        {% endfor%}
       </tbody>
     
      <tfoot>

      </tfoot>
    </table>
</div>


</main>

<script>
  // table design starts

const cc = (dispo,htdispo,ct) => {
  // if (dispo == htdispo){
        if(ct ==  1){
              
              $(`.${htdispo}`).parent().find('.atm1').html()== "" ?  $(`.${htdispo}`).parent().find('.atm1').html(1):$(`.${htdispo}`).next().html(parseInt($(`.${htdispo}`).parent().find('.atm1').html()) + 1)
          }
          else if(ct ==  2){
            // console.log("Busy",count)
            // if (x[i][0] == "Busy"){
              $(`.${htdispo}`).parent().find('.atm2').html()== "" ?  $(`.${htdispo}`).parent().find('.atm2').html(1):$(`.${htdispo}`).parent().find('.atm2').html(parseInt($(`.${htdispo}`).parent().find('.atm2').html()) + 1)
              
        }
          else if(ct ==  3){
            // console.log("Busy",count)
            // if (x[i][0] == "Busy"){
              $(`.${htdispo}`).parent().find('.atm3').html()== "" ?  $(`.${htdispo}`).parent().find('.atm3').html(1):$(`.${htdispo}`).parent().find('.atm3').html(parseInt($(`.${htdispo}`).parent().find('.atm3').html()) + 1)     
        }
          else if(ct ==  4){
            // console.log("Busy",count)
            // if (x[i][0] == "Busy"){
              $(`.${htdispo}`).parent().find('.atm4').html()== "" ?  $(`.${htdispo}`).parent().find('.atm4').html(1):$(`.${htdispo}`).parent().find('.atm4').html(parseInt($(`.${htdispo}`).parent().find('.atm4').html()) + 1)
              
        }
          else if(ct ==  5){
            // console.log("Busy",count)
            // if (x[i][0] == "Busy"){
              $(`.${htdispo}`).parent().find('.atm5').html()== "" ?  $(`.${htdispo}`).parent().find('.atm5').html(1):$(`.${htdispo}`).parent().find('.atm5').html(parseInt($(`.${htdispo}`).parent().find('.atm5').html()) + 1)
              
        }
          else if(ct ==  6){
            // console.log("Busy",count)
            // if (x[i][0] == "Busy"){
              $(`.${htdispo}`).parent().find('.atm6').html()== "" ?  $(`.${htdispo}`).parent().find('.atm6').html(1):$(`.${htdispo}`).parent().find('.atm6').html(parseInt($(`.${htdispo}`).parent().find('.atm6').html()) + 1)
              
        }
          else if(ct ==  7){
            // console.log("Busy",count)
            // if (x[i][0] == "Busy"){
              $(`.${htdispo}`).parent().find('.atm7').html()== "" ?  $(`.${htdispo}`).parent().find('.atm7').html(1):$(`.${htdispo}`).parent().find('.atm7').html(parseInt($(`.${htdispo}`).parent().find('.atm7').html()) + 1)
              
        }
          else if(ct ==  8){
            // console.log("Busy",count)
            // if (x[i][0] == "Busy"){
              $(`.${htdispo}`).parent().find('.atm8').html()== "" ?  $(`.${htdispo}`).parent().find('.atm8').html(1):$(`.${htdispo}`).parent().find('.atm8').html(parseInt($(`.${htdispo}`).parent().find('.atm8').html()) + 1)
              
        }
          else if(ct ==  9){
            // console.log("Busy",count)
            // if (x[i][0] == "Busy"){
              $(`.${htdispo}`).parent().find('.atm9').html()== "" ?  $(`.${htdispo}`).parent().find('.atm9').html(1):$(`.${htdispo}`).parent().find('.atm9').html(parseInt($(`.${htdispo}`).parent().find('.atm9').html()) + 1)
              
        }
          else if(ct ==  10){
            // console.log("Busy",count)
            // if (x[i][0] == "Busy"){
              $(`.${htdispo}`).parent().find('.atm10').html()== "" ?  $(`.${htdispo}`).parent().find('.atm10').html(1):$(`.${htdispo}`).parent().find('.atm10').html(parseInt($(`.${htdispo}`).parent().find('.atm10').html()) + 1)
              
        }
      // }
}


  const disstat = () => {
    console.log("fun")
    $.ajax({
      method:'get',
      headers: {
      "X-CSRFToken": document.querySelector('[name=csrfmiddlewaretoken]').value,
      },
      url: "{% url 'tvajax' %}",
      // data:data2,
      processData: false,
      contentType: false,
      datatype:'json',
      success: function (data) {
        var x=data.stat
        console.log(x)
        
        
        for(var i in x ){

          if (x[i][0] == "Busy" ){

            cc(x[i][0],"Busy",x[i][1])
          }
          else if (x[i][0] == "Promise To Pay" ){

            cc(x[i][0],"PTP",x[i][1])
          }
          else if (x[i][0] == "Call Back" ){

            cc(x[i][0],"CBK",x[i][1])
          }
          else if (x[i][0] == "Schedule Call" ){

            cc(x[i][0],"SCBK",x[i][1])
          }
          else if (x[i][0] == "OTS Request" ){

            cc(x[i][0],"OTS",x[i][1])
          }
          else if (x[i][0] == "Settlement" ){

            cc(x[i][0],"SETTEL",x[i][1])
          }
          else if (x[i][0] == "Send FE To Collect" ){

            cc(x[i][0],"SFTCOL",x[i][1])
          }
          else if (x[i][0] == "Broken Promise" ){

            cc(x[i][0],"BPTP",x[i][1])
          }
          else if (x[i][0] == "Refused To Pay" ){

            cc(x[i][0],"RTP",x[i][1])
          }
          else if (x[i][0] == "No-Recall" ){

            cc(x[i][0],"nocall",x[i][1])
          }
          else if (x[i][0] == "No-Recall" ){

            cc(x[i][0],"nocall",x[i][1])
          }
          else if (x[i][0] == "Ringing No Response" ){

            cc(x[i][0],"RNR",x[i][1])
          }
          else if (x[i][0] == "Call Wating" ){

            cc(x[i][0],"Cwait",x[i][1])
          }
          else if (x[i][0] == "Switch OFF" ){

            cc(x[i][0],"SOFF",x[i][1])
          }
          else if (x[i][0] == "Wrong Contact" ){

            cc(x[i][0],"WCN",x[i][1])
          }
          else if (x[i][0] == "Not Available" ){

            cc(x[i][0],"NOTAVL",x[i][1])
          }
          else if (x[i][0] == "Language not Communicable " ){

            cc(x[i][0],"LNC",x[i][1])
          }

        }
      }
    })
  }


   
      $(document).ready(function () {
        // console.log($(".dispo").html())
        // console.log("get ready")
        $('.header-title').html("Team Overall Report")
        disstat()
      //    var table =  $('#example').DataTable({
      //       "aLengthMenu":[100]
      //     });
      //     var search = $.fn.dataTable.util.throttle(
      //     function(val) {
      //         table.search(val).draw();
      //     },
      //     400  // Search delay in ms
      // );

      $('.dashsearch').keyup(function() {
          search(this.value);
          
          
        });
        

$('.show').click(function() {
$('.logdiv').toggle('slow');  
console.log("hiii")      
});

$(".ptp").click(function(){
console.log("ptp")
$(".ptp").addClass("clicked")
$("#paid").removeClass("clicked")
$("#ptps").removeClass("clicked")
$("#ptpsc").removeClass("clicked")
$("#dispostatus").removeClass("clicked")
$("#notattempt").removeClass("clicked")
})
});
$("#paid").click(function(){
$("#paid").addClass("clicked")
$("#ptp").removeClass("clicked")
$("#ptps").removeClass("clicked")
$("#ptpsc").removeClass("clicked")
$("#dispostatus").removeClass("clicked")
$("#notattempt").removeClass("clicked")
});
$("#ptps").click(function(){
$("#ptps").addClass("clicked")
$("#ptp").removeClass("clicked")
$("#paid").removeClass("clicked")
$("#ptpsc").removeClass("clicked")
$("#dispostatus").removeClass("clicked")
$("#notattempt").removeClass("clicked")
});
$("#ptpsc").click(function(){
$("#ptpsc").addClass("clicked")
$("#ptp").removeClass("clicked")
$("#ptps").removeClass("clicked")
$("#paid").removeClass("clicked")
$("#dispostatus").removeClass("clicked")
$("#notattempt").removeClass("clicked")
});
$("#dispostatus").click(function(){
$("#dispostatus").addClass("clicked")
$("#ptp").removeClass("clicked")
$("#ptps").removeClass("clicked")
$("#ptpsc").removeClass("clicked")
$("#paid").removeClass("clicked")
$("#notattempt").removeClass("clicked")
});
$("#notattempt").click(function(){
$("#notattempt").addClass("clicked")
$("#ptp").removeClass("clicked")
$("#ptps").removeClass("clicked")
$("#ptpsc").removeClass("clicked")
$("#dispostatus").removeClass("clicked")
$("#paid").removeClass("clicked")
})





</script>


{% endblock content  %}