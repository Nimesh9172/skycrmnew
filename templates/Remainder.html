{% extends 'base.html' %} {% load static %}

  {% block content %}
  <style>
    .ots-filter{
        width: 120px;
      }

      .select2-container .select2-selection--single{
        height: 33px;
      }

      .select2-container--default .select2-selection--single .select2-selection__rendered {
        line-height: 35px;
      }

      .select2-container--default .select2-selection--single{
        border-radius: 8px;
        background-color: #ffffff;
        box-shadow: 0px 0px 4px rgb(0 0 0 / 25%);
        border: none;
      }

      .select2-container--default .select2-selection--single .select2-selection__arrow{
        top: 4px;
      }

      .sortby-div >.select2-container--default .select2-selection--single .select2-selection__rendered{
        padding-left: 38px; 
      }
  
    .flatpickr-time{
display: none;
}
.fa-caret-downs{
        color: #197AA4;
        font-size: 11px;
        position: absolute;
        background-color: #fff;
        right: 3px;
        top: 6px;
        width: 12px;

      }

      .fa-caret-downs img{
        width: 8px;
        height: 5px;
      }
/* 
.ots-filter .multiselect .selectbox .customselect .select2-selection__arrow{
height: 26px;
    position: absolute;
    top: 1px;
    right: 1px;
    width: 20px;
}
.ots-filter .multiselect .selectbox .customselect .select2-selection__arrow b{
  border-color: #197AA4 transparent transparent transparent;
    border-style: solid;
    border-width: 5px 4px 0 4px;
    height: 0;
    left: 50%;
    margin-left: -4px;
    margin-top: -2px;
    position: absolute;
    top: 50%;
    width: 0;
} */
  </style>
  {% include "style.html" %}
  <div class="row">
    <div class="dash">Reminder</div>
    
    <div class="row" >
      <div class="cal">
        <div class="column gx-5 ">
          From
          <form action="">
            <div class= "cal-con">
              <img class="cal-icon c1" src="{% static 'Images/cal.png' %}" alt="">
            <input class="form-control fdate cal1 " type="datetime-local" placeholder="Select Date" >
            </div>
        </form>
         
        </div>
        <div class="column">
          <div class="flex-wrape ">
            To
            <form action="">
              <div class= "cal-con">
                <img class="cal-icon c2" src="{% static 'Images/cal.png' %}" alt="">
               <input class="form-control todate cal2" type="datetime-local" placeholder="Select Date" >
              </div>
            </form>
            
          </div>
        </div>
        <div class="column d-flex gap-2 align-items-end justify-content-end flex-wrap " style="width:30%">
          
          <div class="ots-filter sortby-div">
            <img src="{% static 'Images/filt.png' %}" class="sort-icon" alt="">
            <select class="sortbysel sortotsbtn" name="sortby">
              <option value="">Sort By</option>
              <option value="all">All</option>
              <option value="ascending">Ascending</option>
              <option value="descending">Descending</option>
            </select>
          </div>
          {% csrf_token %}
          <div class="ots-filter">
            <div class="multiselect">
              <div class="selectbox" onclick="showCheckBoxes()">
                <img src="{% static 'Images/filterby.png' %}" style="height: 13px; margin-top: 2px; width: 15.7px;" class="sort-icon" alt="">
                 <select class="customselect">
                    <option value="">Filter By</option>
                 </select>
                 <div class="fa-caret-downs">
                  <img class="" src="{% static 'Images/caret.png'  %}" alt="">
                </div>
                 <div class="overselect"></div>
              </div>
              <div id="checkboxes">
                <label for="ptp" class="checkbox-wrapper">
                  <input type="checkbox" value="Promise to Pay" name="remcb" id="ptp"><label for="ptp">PTP</label>
                </label>
                <label for="call" class="checkbox-wrapper">
                  <input type="checkbox" value="Call Back" name="remcb" id="call">
                  <label for="call">Call Back</label>
                </label>
                <label for="sch" class="checkbox-wrapper">
                  <input type="checkbox" value="Schedule Call" name="remcb" id="sch">
                  <label  for="sch">Schedule Call</label>
                </label>
              </div>
           </div>
          </div>
        </div>
      </div>
     
    </div>
      <div class="bigdiv flex-wrap">
       
      
          
        

      </div>
  </div>
  <!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script> -->
{% include 'reminderajax.html' %} 
<script>
   var expanded = false;
   function showCheckBoxes() {
      var checkboxes = document.getElementById('checkboxes');
      if (!expanded){
         checkboxes.style.display = "block";
         expanded = true;
      }else {
         checkboxes.style.display = "none";
         expanded = false;

      }
   }
</script>
  <script>
      config={
      enableTime: true,
      dateFormat: "d-m-Y ",
      altInput: true,
      altFormat: "F j, Y",
    
}
    flatpickr("input[type=datetime-local]",config);
    $(document).ready(function(){

      $('.overselect').click(function(){
        $('#checkboxes').toggleClass('d-none')
      })

      $(".cmssel").addClass("active-page")
      $(document).on("click", function (event) {
      // If the target is not the container or a child of the container, then process
      // the click event for outside of the container.

      if ($(event.target).parent().attr('id') != "checkboxes" && $(event.target).parent().attr('class') != 'checkbox-wrapper' ){
        $('#checkboxes').css({'display':'none'})
        console.log($(event.target).parent().attr('class'))
      } 
      if ($(event.target).attr('class') == "overselect" ){
        console.log("You");
        $('#checkboxes').css({'display':'block'})
      }
});
      let remf = sessionStorage.getItem('remfilter')
      remf = remf.split(',')
      $('#checkboxes').find('input[name=remcb]').each(function(){
          if (remf.includes($(this).val())){
            $(this).attr('checked',true)
          }
      })
      console.log(remf)
      // $('')
      let sortby=sessionStorage.getItem("sort")
      console.log(sortby)
      
      $('.sortbysel').val(sortby);

    $('.show').click(function() {
       $('.hide').toggle('slow');
    });

  $('.sortshow').click(function() {
      $('.sorthide').show('slow');        
  });

  $(document).mouseup(function (e) {
      if ($(e.target).closest(".sorthide").length=== 0) {
          $(".sorthide").hide("slow");
      }
  });

  $(document).mouseup(function (e) {

    
      if ($(e.target).closest(".hide").length=== 0) {
          $(".hide").hide("slow");
      }
  });

  $('.c1').click(function(){
    $('.cal1').click()
  })

  $('.c2').click(function(){
    $('.cal2').click()
  })
  
})
  

  </script>
  {% endblock content %}
</body>
